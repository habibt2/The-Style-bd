<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Invoice - The Style Room</title>
  <style>
    body { font-family:"Noto Sans Bengali", sans-serif; margin:0; padding:0; background:#f5f5f5; color:#333; }
    .container { max-width:700px; margin:30px auto; background:#fff; padding:20px 30px; border-radius:12px; box-shadow:0 4px 15px rgba(0,0,0,0.1); }
    h2{text-align:center; margin-bottom:20px;}
    form input, form select, form textarea { width:100%; padding:10px; margin:8px 0; border-radius:6px; border:1px solid #ccc; }
    .buttons { display:flex; justify-content:flex-end; gap:15px; margin-top:15px; }
    button { padding:10px 20px; border:none; border-radius:8px; cursor:pointer; font-weight:bold; }
    .cancel{background:#ccc;} .submit{background:#ff5722; color:#fff;}
    .modal{display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); z-index:999;}
    .modal-content{background:#fff; margin:30px auto; padding:20px; max-width:700px; border-radius:12px; position:relative;}
    .modal-logo{width:100px; opacity:0.1; position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); z-index:0;}
    .modal-inner{position:relative; z-index:1;}
    .close{position:absolute; top:10px; right:15px; font-size:28px; cursor:pointer; color:#333;}
    .invoice-header{text-align:center; margin-bottom:20px; font-size:24px; font-weight:bold;}
    .invoice-footer{text-align:right; margin-top:30px; font-style:italic;}
  </style>
</head>
<body>
  <div class="container">
    <h2>Generate Invoice / Memo</h2>
    <form id="invoiceForm">
      <input type="text" id="customerName" placeholder="Customer Name" required>
      <input type="text" id="customerPhone" placeholder="Phone (+880)" required>
      <input type="text" id="customerAddress" placeholder="Address" required>
      <select id="productSelect" required>
        <option value="">Select Product</option>
        <option value="Cool Blue Tee">Cool Blue Tee</option>
        <option value="Urban Black Tee">Urban Black Tee</option>
        <option value="Classic White Tee">Classic White Tee</option>
      </select>
      <input type="number" id="productQty" placeholder="Quantity" min="1" value="1">
      <textarea id="orderMemo" placeholder="Order Memo / Notes (Optional)"></textarea>
      <div class="buttons">
        <button type="reset" class="cancel">Cancel</button>
        <button type="submit" class="submit">Generate Invoice</button>
      </div>
    </form>
  </div>

  <!-- Modal -->
  <div id="invoiceModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <img src="logo.png" class="modal-logo" alt="Logo">
      <div class="modal-inner" id="invoiceContent"></div>
    </div>
  </div>

  <script>
    const invoiceForm = document.getElementById("invoiceForm");
    const modal = document.getElementById("invoiceModal");
    const modalContent = document.getElementById("invoiceContent");
    const closeModalBtn = document.querySelector(".close");

    let lastOrderNum = parseInt(localStorage.getItem("lastOrderNum")) || 1000;

    closeModalBtn.onclick = ()=>{modal.style.display="none";}
    window.onclick=(e)=>{if(e.target===modal) modal.style.display="none";}

    invoiceForm.addEventListener("submit", function(e){
      e.preventDefault();
      const name=document.getElementById("customerName").value.trim();
      const phone=document.getElementById("customerPhone").value.trim();
      const address=document.getElementById("customerAddress").value.trim();
      const product=document.getElementById("productSelect").value;
      const qty=document.getElementById("productQty").value;
      const memo=document.getElementById("orderMemo").value.trim();

      if(!phone.startsWith("+880") || phone.length<10){alert("Phone must start with +880"); return;}

      lastOrderNum++;
      localStorage.setItem("lastOrderNum", lastOrderNum);

      const orderData={orderNum:lastOrderNum,name,phone,address,product,qty,memo};
      let orders=JSON.parse(localStorage.getItem("orders"))||[];
      orders.push(orderData);
      localStorage.setItem("orders", JSON.stringify(orders));

      modalContent.innerHTML=`
        <div class="invoice-header">The Style Room</div>
        <p><strong>Order #:</strong> ${lastOrderNum}</p>
        <p><strong>Name:</strong> ${name}</p>
        <p><strong>Phone:</strong> ${phone}</p>
        <p><strong>Address:</strong> ${address}</p>
        <p><strong>Product:</strong> ${product}</p>
        <p><strong>Quantity:</strong> ${qty}</p>
        <p><strong>Memo:</strong> ${memo||"N/A"}</p>
        <div class="invoice-footer">Owner Signature: ___________________</div>
      `;
      modal.style.display="block";
      invoiceForm.reset();
    });
  </script>
</body>
</html>
